(this["webpackJsonphackh-broadcast-web"]=this["webpackJsonphackh-broadcast-web"]||[]).push([[0],{231:function(e,t,a){e.exports=a(461)},236:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},439:function(e,t,a){},449:function(e,t,a){},461:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),s=(a(236),a(61)),l=a(222),i=a.n(l),u=a(33),m=a(206),d=a(35),p=a(31),g=(a(254),a(255),a(256),function(){return r.a.createElement("div",{className:"error404"},r.a.createElement("span",{className:"error404__path-invalid"},"page not found"))}),h=(a(103),a(46)),b=(a(462),a(165)),f=(a(261),a(164)),v=(a(168),a(89)),E=(a(104),a(25)),x=(a(265),a(166)),y=a(8),O=a.n(y),k=a(15),j=a(73),S=a(74),w=a(36),N=a(79),C=a(81),_=(a(90),a(34)),T=a(479),I=a(207),A=a.n(I),L=a(41),P=a(84),M=a.n(P),D=function(){var e=Object(k.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(L.database)().ref("telegram").limitToLast(200),e.abrupt("return",new Promise((function(e,a){try{t.on("value",(function(t){t.val();var a=[];return t.forEach((function(e){a.push(e.val())})),e(a.reverse())}))}catch(n){a(n)}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(k.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(L.database)().ref("telegram"),e.next=3,a.push({message:t.message,date:M()().format()}).then((function(e){return e.key}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=A.a.create({baseURL:"https://zwrqt3cve3.execute-api.ap-southeast-1.amazonaws.com/dev/api",headers:{"Content-Type":"application/json"}});z.interceptors.request.use((function(e){var t=function(){try{var e=JSON.parse(localStorage.getItem("state")).auth.token.token;if(!e)throw Error();return e}catch(t){return null}}();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){Promise.reject(e)}));var R=function(e){return z.post("/messenger",e)},B=function(e){return z.post("/telegram",e)},W=function(){return D()},V=function(e){return H(e)},K=function(e){return Object(L.auth)().signInWithCustomToken(e)},Y=function(){return Object(L.auth)().signOut()},q=function(e){return z.post("/auth",{phone:e})},G=function(e,t){return z.post("/auth",{phone:e,code:t})},U=function(){return Object(L.auth)().currentUser.getIdTokenResult()},J=a(88);J.a.use(u.a).init({resources:{en:{translation:{"Welcome to React":"Welcome to React and react-i18next",Outbox:"Outbox",Drafts:"Drafts",Text:"Text","Text + buttons":"Text + buttons","Image + buttons":"Image + buttons","Style 1":"Style 1","Style 2":"Style 2","Style 3":"Style 3",app_title:"COVID-19 Broadcasting System of The Kingdom of Cambodia",logout_title:"logout from system?",cancel:"Cancel",reset:"Reset",send:"Send",ok:"OK","Something went wrong":"Something went wrong!","Are you sure you want to send":"Are you sure you want to send this message?","send message":"Send message to {{provider}}",invalid_phone:"Invalid phone number! Please check your phone number",login_with_phone:"Login with your phone number",enter_otp:"Enter your OTP you recieve from SMS",phone_placeholder:"e.g +855123456789",otp_placeholder:"6 digits code",send_code:"Send Codes",login:"Login",text_message:"Text Message",not_recieve_code:"Didn't recieve your OTP code?",resend_otp:"Resend OTP",change_phone:"Re-enter your phone number"}},km:{translation:{"Welcome to React":"\u179f\u17bc\u1798\u179f\u17d2\u179c\u17b6\u1782\u1798\u1793\u17cd\u1798\u1780\u1780\u17b6\u1793\u17cb React",Outbox:"\u1794\u17d2\u179a\u17a2\u1794\u17cb\u200b\u1785\u17c1\u1789",Drafts:"\u179f\u17c6\u178e\u17c1\u179a\u1796\u17d2\u179a\u17c0\u1784",Text:"\u17a2\u178f\u17d2\u1790\u1794\u1791","Text + buttons":"\u17a2\u178f\u17d2\u1790\u1794\u1791 + \u1794\u17ca\u17bc\u178f\u17bb\u1784","Image + buttons":"\u179a\u17bc\u1794\u1797\u17b6\u1796 + \u1794\u17ca\u17bc\u178f\u17bb\u1784","Style 1":"\u179b\u17c6\u1793\u17b6\u17c6\u200b \u1791\u17b8\u17e1","Style 2":"\u179b\u17c6\u1793\u17b6\u17c6 \u1791\u17b8\u17e2","Style 3":"\u179b\u17c6\u1793\u17b6\u17c6 \u1791\u17b8\u17e3",app_title:"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799 COVID-19 \u1793\u17c3\u200b\u1796\u17d2\u179a\u17c7\u200b\u179a\u17b6\u1787\u17b6\u178e\u17b6\u1785\u1780\u17d2\u179a\u200b\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6",logout_title:"\u1785\u17b6\u1780\u1785\u17c1\u1789\u1796\u17b8 \u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799 COVID-19?",cancel:"\u1794\u17c4\u17c7\u1794\u1784\u17cb",reset:"\u179b\u17bb\u1794\u1785\u17c4\u179b",send:"\u1795\u17d2\u1789\u17be",ok:"\u1794\u17b6\u1791/\u1785\u17b6\u179f","Something went wrong":"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799","Are you sure you want to send":"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799","send message":"\u1795\u17d2\u1789\u17be\u179f\u17b6\u179a\u1791\u17c5\u1780\u17b6\u1793\u17cb\u200b {{provider}}",invalid_phone:"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u1798\u17b7\u1793\u178f\u17d2\u179a\u17b9\u1798\u178f\u17d2\u179a\u17bc\u179c! \u179f\u17bc\u1798\u1796\u17b7\u1793\u17b7\u178f\u17d2\u1799\u1798\u17d2\u178a\u1784\u1791\u17c0\u178f...",login_with_phone:"\u1785\u17bc\u179b\u1794\u17d2\u179a\u17be\u178a\u17c4\u1799\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791",enter_otp:"\u1794\u1789\u17d2\u1787\u17bc\u179b\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb",phone_placeholder:"\u17a7 +\u17e8\u17e5\u17e5\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9",otp_placeholder:"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u17e6\u1781\u17d2\u1791\u1784\u17cb",send_code:"\u1795\u17d2\u1789\u17be\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb",login:"\u1785\u17bc\u179b\u1794\u17d2\u179a\u17be",text_message:"\u179f\u17b6\u179a",not_recieve_code:"\u1798\u17b7\u1793\u1791\u1791\u17bd\u179b\u1794\u17b6\u1793\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u200b\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780?",resend_otp:"\u1795\u17d2\u1789\u17be\u1798\u17d2\u178a\u1784\u1791\u17c0\u178f",change_phone:"\u1794\u1789\u17d2\u1787\u17bc\u179b\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u1798\u17d2\u178f\u1784\u1791\u17c0\u178f"}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}}),J.a.changeLanguage("km-KH");var F=J.a,Q=function(e){return function(t){t({type:"SAVE_AUTH_TOKEN",payload:e})}},X=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={phone:"855",isLoading:!1,error:null,phoneError:!1,codeSent:!1,code:""},n.requestOtp=n.requestOtp.bind(Object(w.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(w.a)(n)),n.authenticateOtp=n.authenticateOtp.bind(Object(w.a)(n)),n.handleOtpChange=n.handleOtpChange.bind(Object(w.a)(n)),n.validatePhone=n.validatePhone.bind(Object(w.a)(n)),n.changePhone=n.changePhone.bind(Object(w.a)(n)),n}return Object(S.a)(a,[{key:"requestOtp",value:function(){var e=Object(k.a)(O.a.mark((function e(){var t,a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validatePhone(),t=this.state,a=t.phone,!t.phoneError){e.next=5;break}return r=F.t("invalid_phone"),_.a.error({title:r,className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok")}),e.abrupt("return");case 5:return this.setState({isLoading:!0}),e.prev=6,e.next=9,q("+".concat(a));case 9:n=e.sent,console.log("result",n),(0,this.props.savePhone)(a),this.setState({codeSent:!0,isLoading:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),this.setState({isLoading:!1,error:e.t0.response.data});case 19:case"end":return e.stop()}var r}),e,this,[[6,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"authenticateOtp",value:function(){var e=Object(k.a)(O.a.mark((function e(){var t,a,n,r,c,o,s,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.code,n=t.phone,this.setState({isLoading:!0}),e.prev=2,e.next=5,G("+".concat(n),"".concat(a));case 5:return r=e.sent,c=this.props,o=c.saveAuthToken,s=c.history,e.next=9,K(r.data.data.customToken);case 9:return e.next=11,U();case 11:l=e.sent,o(l),s.push("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.log("error.response",e.t0),this.setState({isLoading:!1,error:e.t0.response.data});case 20:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleOtpChange",value:function(e){this.setState({code:e})}},{key:"handleInputChange",value:function(e){this.setState({phone:e?"".concat(e):"855"})}},{key:"validatePhone",value:function(){var e=this.state.phone;this.setState({phoneError:!e||e.length<10})}},{key:"changePhone",value:function(){this.setState({phone:"",codeSent:!1})}},{key:"render",value:function(){var e=this.state,t=e.phone,a=e.isLoading,n=e.code,c=e.error,o=e.phoneError,s=e.codeSent,l=this.props.t;return r.a.createElement(h.a,{style:{minHeight:"100vh",backgroundImage:"url(/login-image.jpg)"},className:"flex flex-grow justify-center items-center"},s?r.a.createElement(b.a,{style:{width:500,minHeight:"38vh"},className:"flex flex-col",id:"otp-login"},r.a.createElement("h1",{className:"py-1 pb-4 text-xl",style:{fontSize:"1.825em",fontWeight:"bold"}},l("app_title")),r.a.createElement("h3",{className:"py-1 pb-6 text-lg",style:{fontSize:"1.825em",fontWeight:"bold"}},l("enter_otp")),r.a.createElement(f.a,{className:"flex flex-grow flex-col"},r.a.createElement(x.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),className:"py-1 w-full",placeholder:l("otp_placeholder"),name:"code",maxLength:"6",value:n,onChange:this.handleOtpChange}),r.a.createElement(E.a,{className:"btn-round ml-1 my-2 flex flex-grow items-center justify-center",type:"button",onClick:this.authenticateOtp,loading:a},l("login")),c&&r.a.createElement(v.a,{className:"my-2",message:c.message,type:"error",showIcon:!0})),r.a.createElement("div",{className:"trobleshoot-links flex flex-col justify-center items-center py-8"},r.a.createElement("p",null,l("not_recieve_code")),r.a.createElement("div",{className:"links-group flex flex-row items-center justify-center"},r.a.createElement(E.a,{type:"link",onClick:this.changePhone},l("change_phone")),r.a.createElement("span",null,l("or")),r.a.createElement(E.a,{type:"link",onClick:this.requestOtp},l("resend_otp"))))):r.a.createElement(b.a,{style:{width:500,minHeight:"38vh"},className:"flex flex-col",id:"phone-login"},r.a.createElement("h1",{className:"py-1 pb-4 text-xl",style:{fontSize:"1.825em",fontWeight:"bold"}},l("app_title")),r.a.createElement("h3",{className:"py-1 pb-6 text-lg",style:{fontSize:"1.825em",fontWeight:"bold"}},l("login_with_phone")),r.a.createElement(f.a,{className:"flex flex-grow flex-col"},r.a.createElement(x.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),className:"py-1 w-full",placeholder:l("phone_placeholder"),name:"phone",maxLength:"13",value:t,onBlur:this.validatePhone,type:"text",onChange:this.handleInputChange}),r.a.createElement(E.a,{className:"btn-round my-2 flex flex-grow items-center justify-center",type:"button",onClick:this.requestOtp,loading:a},l("send_code")),o&&r.a.createElement(v.a,{className:"my-2",message:l("invalid_phone"),type:"warning",showIcon:!0}),c&&r.a.createElement(v.a,{className:"my-2",message:c.message,type:"error",showIcon:!0}))))}}]),a}(n.Component),Z=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{savePhone:function(t){e(function(e){return function(t){t({type:"SAVE_PHONE",payload:e})}}(t))},saveAuthToken:function(t){e(Q(t))}}}))(Object(u.c)()(Object(d.g)(X))),$=a(130),ee=a(464),te=a(465),ae=a(466),ne=a(467),re=a(468),ce=a(469),oe=a(470),se=a(216),le=a(471),ie=a(472),ue=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={code:""},n.authenticateOtp=n.authenticateOtp.bind(Object(w.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(w.a)(n)),n}return Object(S.a)(a,[{key:"authenticateOtp",value:function(){var e=Object(k.a)(O.a.mark((function e(){var t,a,n,r,c,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth,a=this.state.code,e.prev=2,e.next=5,G(t.phone,a);case 5:return n=e.sent,console.log("authenticateOtp",n),console.log("result.data.data.customToken",n.data.data.customToken),r=this.props,c=r.saveAuthToken,o=r.history,e.next=11,K(n.data.data.customToken);case 11:return e.next=13,U();case 13:s=e.sent,console.log("token",s),c(s),o.push("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("error",e.t0);case 22:case"end":return e.stop()}}),e,this,[[2,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object($.a)({},n,a))}},{key:"render",value:function(){var e=this.state.code;return r.a.createElement("div",{className:"section section-image section-login",style:{backgroundImage:"url(/login-image.jpg)"}},r.a.createElement(ee.a,null,r.a.createElement(te.a,{style:{paddingTop:"30px"}},r.a.createElement(ae.a,{className:"mx-auto",lg:"4",md:"6"},r.a.createElement(ne.a,{className:"card-register"},r.a.createElement("h3",{className:"title mx-auto",style:{fontSize:"1.825em",fontWeight:"bold"}},"Please input your OTP"),r.a.createElement(re.a,{className:"register-form"},r.a.createElement("label",null,"OTP"),r.a.createElement(ce.a,{className:"form-group-no-border"},r.a.createElement(oe.a,{addonType:"prepend"},r.a.createElement(se.a,null,r.a.createElement("i",{className:"nc-icon nc-mobile"}))),r.a.createElement(le.a,{placeholder:"OTP",type:"number",name:"code",value:e,onChange:this.handleInputChange})),r.a.createElement(ie.a,{block:!0,onClick:this.authenticateOtp,className:"btn-round",color:"danger",type:"button"},"Login")))))))}}]),a}(n.Component),me=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{saveAuthToken:function(t){e(Q(t))}}}))(Object(d.g)(ue)),de=(a(463),a(38)),pe=a(473),ge=h.a.Sider,he=de.a.SubMenu,be=function(){var e=Object(u.b)().t;return r.a.createElement(ge,null,r.a.createElement("div",{style:{width:"100px",margin:"20px 0px 20px 0px",transform:"translate(".concat(50,"%")}},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{className:"h-full w-full border border-solid border-white rounded-sm cursor-pointer",src:"/flag-cambodia.jpg",alt:"Khmer"}))),r.a.createElement(de.a,{theme:"dark",mode:"inline",style:{height:"100%",borderRight:0}},r.a.createElement(he,{key:"messages",title:r.a.createElement("span",null,r.a.createElement(pe.a,{component:function(){return r.a.createElement("img",{src:"/mail.svg",alt:"message"})}}),"Messages")},r.a.createElement(de.a.Item,{key:"outbox"},r.a.createElement(p.b,{to:"/outbox"},e("Outbox"))),r.a.createElement(de.a.Item,{disabled:!0,key:"draft"},r.a.createElement(p.b,{to:"/drafts"},e("Drafts")))),r.a.createElement(he,{key:"messenger",title:r.a.createElement("span",null,r.a.createElement(pe.a,{component:function(){return r.a.createElement("img",{src:"/messenger.svg",alt:"messenger"})}}),"Messenger")},r.a.createElement(de.a.Item,{key:"text-only"},r.a.createElement(p.b,{to:"/messenger-text"},e("Text"))),r.a.createElement(de.a.Item,{disabled:!0,key:"text-with-button"},r.a.createElement(p.b,{to:"/messenger-text-button"},e("Text + buttons"))),r.a.createElement(de.a.Item,{disabled:!0,key:"image-with-button"},r.a.createElement(p.b,{to:"/messenger-image-button"},e("Image + buttons")))),r.a.createElement(he,{key:"telegram",title:r.a.createElement("span",null,r.a.createElement(pe.a,{component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}}),"Telegram")},r.a.createElement(de.a.Item,{key:"style-1"},r.a.createElement(p.b,{to:"/telegram-style-1"},e("Style 1"))),r.a.createElement(de.a.Item,{disabled:!0,key:"style-2"},r.a.createElement(p.b,{to:"/telegram-style-2"},e("Style 2"))),r.a.createElement(de.a.Item,{disabled:!0,key:"style-3"},r.a.createElement(p.b,{to:"/telegram-style-3"},e("Style 3")))),r.a.createElement(he,{key:"sms",title:r.a.createElement("span",null,r.a.createElement(pe.a,{component:function(){return r.a.createElement("img",{src:"/sms.svg",alt:"sms"})}}),"SMS")},r.a.createElement(de.a.Item,{disabled:!0,key:"sms-text"},r.a.createElement(p.b,{to:"/sms-text"},e("Text"))))))},fe=(a(435),a(217)),ve=a(478),Ee=function(e){console.log("lang",e),J.a.changeLanguage(e)},xe=function(){return r.a.createElement("div",{className:"langauge-switcher flex flex-row"},r.a.createElement("div",{className:"img-wrapper w-6 h-4 mx-1 border border-solid border-white rounded-sm cursor-pointer",onClick:function(){return Ee("km")}},r.a.createElement("img",{className:"h-full w-full",src:"/flag-cambodia.jpg",alt:"Khmer"})),r.a.createElement("div",{className:"img-wrapper w-6 h-4 mx-1 border border-solid border-white rounded-sm cursor-pointer",onClick:function(){return Ee("en")}},r.a.createElement("img",{className:"h-full w-full",src:"/flag-british.jpg",alt:"English"})))},ye=_.a.confirm,Oe=h.a.Header,ke=function(){var e=Object(u.b)().t;return r.a.createElement(Oe,{className:"flex flex-row items-center overflow-hidden  p-8",style:{padding:0}},r.a.createElement("h1",{className:"text-white text-xl mr-auto"},e("app_title")),r.a.createElement(xe,null),r.a.createElement(fe.a,{type:"vertical",className:"h-10"}),r.a.createElement(ve.a,{className:"text-xl text-white px-2 cursor-pointer",onClick:function(){return t=e("logout_title"),a=e("ok"),n=e("cancel"),void ye({title:t,onOk:function(){return Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:localStorage.clear(),window.location.href="/";case 4:case"end":return e.stop()}}),e)})))()},onCancel:function(){console.log("Cancel")},okText:a,cancelText:n});var t,a,n}}))},je=h.a.Content,Se=function(e){Object(C.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={collapsed:!1},n}return Object(S.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{style:{minHeight:"100vh"}},r.a.createElement(be,{width:200,className:"site-layout-background"}),r.a.createElement(h.a,{className:"site-layout"},r.a.createElement(ke,{className:"site-layout-background",style:{padding:0}}),r.a.createElement(je,{style:{margin:"0 16px"}},this.props.children)))}}]),a}(n.Component),we=(a(437),a(218)),Ne=a(14),Ce=a(474),_e=a(475),Te=a(476),Ie=a(477),Ae=a(2),Le=a.n(Ae),Pe=(a(439),function(){var e=Object(n.useState)([]),t=Object(Ne.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Ne.a)(o,2)[1],l=Object(n.useState)(!0),i=Object(Ne.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("1"),p=Object(Ne.a)(d,2),g=p[0],h=p[1];Object(n.useEffect)((function(){b()}),[]);var b=Object(n.useCallback)(Object(k.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,console.log("data",t),m(!1),s(null),c(t),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),s(e.t0),a=e.t0,_.a.error({title:F.t("Something went wrong"),content:a.message,className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok")}),m(!1);case 15:case"end":return e.stop()}var a}),e,null,[[0,10]])}))),[u,a]);return u?r.a.createElement("div",{className:"section-spinner"},r.a.createElement(we.a,null)):r.a.createElement("div",{className:"main-section-tab"},r.a.createElement(te.a,null,r.a.createElement(ae.a,{xs:"6",sm:"4",md:"4",className:"section-cols section-cols-scroll"},r.a.createElement(Ce.a,{tabs:!0,vertical:!0,pills:!0},a.map((function(e,t){return r.a.createElement(_e.a,{className:"section-nav-item",key:t.toString},r.a.createElement(ie.a,{className:Le()("toggleButton",{active:g===t.toString()}),onClick:function(){var e;e=t.toString(),g!==e&&h(e)}},r.a.createElement(te.a,{className:"section-sub-row"},r.a.createElement(ae.a,{lg:"3",className:"section-sub-col-left"},r.a.createElement(pe.a,{component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}}),r.a.createElement("p",{className:"section-sub-p"},M()(e.date).format("HH:mm")),r.a.createElement("p",{className:"section-sub-p"},M()(e.date).format("DD-MM-YYYY"))),r.a.createElement(ae.a,{lg:"9",className:"section-sub-col-right"},r.a.createElement("p",{className:"section-sub-p section-sub-p-overflow text-black"},e.message)))))})))),r.a.createElement(ae.a,{xs:"6",sm:"6",md:"6",className:"section-cols section-cols-right"},r.a.createElement(Te.a,{activeTab:g},a.map((function(e,t){return r.a.createElement(Ie.a,{tabId:t.toString(),key:t.toString()},r.a.createElement("div",{className:"section-tab-container"},r.a.createElement(te.a,null,r.a.createElement(ae.a,{lg:"2"},r.a.createElement(pe.a,{style:{fontSize:"10"},component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}})),r.a.createElement(ae.a,{lg:"1"},r.a.createElement("p",{className:"section-sub-p"})),r.a.createElement(ae.a,{lg:"2"},F.t("text_message")),r.a.createElement(ae.a,{lg:"4"},r.a.createElement("p",{className:"section-sub-p"},M()(e.date).format("HH:mm DD-MM-YYYY")))),r.a.createElement("hr",{className:"my-2",style:{borderColor:"#000",fontSize:"2px",borderTopWidth:"2px"}}),r.a.createElement("p",{className:"section-sub-p section-sub-scroll"},e.message)))}))))))}),Me=function(){return r.a.createElement(Se,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(Pe,null)))},De=(a(440),a(226).a.TextArea),He=function(e){var t=e.messageProviderIcon,a=e.messageProviderLabel;return r.a.createElement("div",{className:"message-provider flex flex-row justify-start items-center"},r.a.createElement("img",{className:"p-2",src:t,alt:a}),r.a.createElement("p",{className:"p-2 font-semibold"},a))},ze=function(e){var t=e.messenger,a=e.onMessageChange,n=e.message,c=void 0===n?"":n,o=e.onSend,s=e.onCancel,l=e.className,i=e.isSuccess,m=e.disabled,d=Object(u.b)().t,p=t.messageProviderLabel,g=t.messageProviderIcon,h=t.maxChar;return r.a.createElement("div",{style:{height:"80%"},className:"message-form flex flex-col ".concat(l)},i&&r.a.createElement(v.a,{className:"mb-2",message:d("Message sent"),type:"success",showIcon:!0,banner:!0,closable:!0}),r.a.createElement("div",{className:"message-provider"},r.a.createElement(He,{messageProviderLabel:p,messageProviderIcon:g})),r.a.createElement("div",{className:"textarea-container flex-grow h-auto relative"},r.a.createElement(De,{autoSize:!0,className:"h-full w-full p-4 pt-6 border-2 border-solid border-blue-dark rounded-md",style:{resize:"none"},value:c,maxLength:h,onChange:function(e){return a(e)},disabled:m,placeholder:d("send message",{provider:p})}),r.a.createElement("div",{className:"characters-counter top-0 right-0 mt-2 mr-2 absolute"},"".concat(c.length,"/").concat(h))),r.a.createElement("div",{className:"message-form__buttons flex flex-row items-center justify-end p-2 pr-0"},r.a.createElement(E.a,{className:"m-2 text-blue-dark border-2 border-blue-dark rounded-md hover:text-white hover:bg-blue",onClick:s,disabled:m},d("cancel")),r.a.createElement(E.a,{className:"m-2 mr-0 text-white border-2 border-blue-dark bg-blue-dark rounded-md hover:text-white hover:bg-blue",onClick:o,type:"primary",disabled:m||!c},d("send"))))},Re=(a(448),a(221)),Be=function(e){var t,a=e.className,n=e.type,c=e.messages;switch(n){case"telegram":t={background:"#19B7EA",bubbleBackground:"#fff"};break;case"messenger":t={background:"#f1f0f0",bubbleBackground:"#d3d3d3"};break;default:t={background:"#fff",bubbleBackground:"#d3d3d3"}}return r.a.createElement("div",{className:"virtual-device ".concat(a)},r.a.createElement(Re.a,{height:500,orientation:"portrait",color:"black"},r.a.createElement("div",{style:{height:"100%",overflowY:"scroll",backgroundColor:t.background,display:"flex",flexDirection:"column",justifyContent:"flex-end"}},r.a.createElement("div",{style:{fontSize:10,borderRadius:8,display:"flex",paddingTop:5,paddingLeft:10,paddingRight:10,minHeight:20,margin:"0 40px 8px 8px",borderStyle:"solid",borderWidth:"1px",backgroundColor:t.bubbleBackground,wordBreak:"break-word",whiteSpace:"pre-wrap"}},r.a.createElement("span",null,c)))))},We={key:"telegram",label:"Telegram",maxChar:4096,icon:"/telegram.svg"},Ve="messenger",Ke="Messenger",Ye=300,qe="/messenger.svg",Ge="",Ue="sms",Je=300,Fe="",Qe=function(e){_.a.error({title:F.t("Something went wrong"),content:e.message,className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok")})},Xe=function(){var e=Object(n.useState)(""),t=Object(Ne.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Ne.a)(o,2)[1],l=Object(n.useState)(!1),i=Object(Ne.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(Ne.a)(d,2),g=p[0],h=p[1],b=Object(n.useState)(""),f=Object(Ne.a)(b,2),v=f[0],E=f[1],x=Object(n.useState)(100),y=Object(Ne.a)(x,2),j=y[0],S=y[1],w=Object(n.useState)(""),N=Object(Ne.a)(w,2),C=N[0],T=N[1],I=Object(n.useState)(!1),A=Object(Ne.a)(I,2),L=A[0],P=A[1];Object(n.useEffect)((function(){return"telegram"===We.key?(h(We.label),E(We.icon),S(We.maxChar),T(We.template)):"telegram"===Ve?(h(Ke),E(qe),S(Ye),T(Ge)):"telegram"===Ue&&(h(Ke),E(qe),S(Je),T(Fe)),function(){h(""),E(""),S(100),T("")}}),["telegram"]),Object(n.useEffect)((function(){var e=setTimeout((function(){L&&P(!1)}),3e3);return function(){return clearTimeout(e)}}),[L]);var M=Object(n.useCallback)(Object(k.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,D({message:a});case 6:return t=e.sent,e.next=9,B({messageId:t});case 9:n=e.sent,console.log("save data for history?",n),console.log("or trigger fetch messages"),m(!1),s(null),c(""),P(!0),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),s(e.t0),Qe(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])}))),[u,a]),D=Object(n.useCallback)(function(){var e=Object(k.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V({message:t.message});case 3:return a=e.sent,m(!1),s(null),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),s(e.t0),Qe(e.t0),m(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),H=Object(n.useCallback)((function(){m(!1),m(!1),s(null)}),[]),z={messageProviderLabel:g,messageProviderIcon:v,maxChar:j,template:C};return r.a.createElement(Se,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(ze,{className:"flex-grow p-4",messenger:z,onMessageChange:function(e){return c(e.target.value)},message:a,onSend:function(){return function(e,t){_.a.confirm({title:F.t("Are you sure you want to send"),onOk:function(){e()},onCancel:function(){t()},className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok"),cancelText:F.t("cancel")})}(M,H)},onCancel:function(){return c("")},disabled:u,isSuccess:L}),r.a.createElement(Be,{className:"flex-grow p-4",type:"telegram",messages:a})))},Ze=function(e){_.a.error({title:F.t("Something went wrong"),content:e.message,className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok")})},$e=[{path:"/",component:Xe,exact:!0,private:!0},{path:"/login",component:Z,exact:!0},{path:"/otp",component:me,exact:!0},{path:"/outbox",component:Me,exact:!0},{path:"/messenger-text",component:function(){var e=Object(n.useState)(""),t=Object(Ne.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Ne.a)(o,2)[1],l=Object(n.useState)(!1),i=Object(Ne.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(Ne.a)(d,2),g=p[0],h=p[1],b=Object(n.useState)(""),f=Object(Ne.a)(b,2),v=f[0],E=f[1],x=Object(n.useState)(100),y=Object(Ne.a)(x,2),j=y[0],S=y[1],w=Object(n.useState)(""),N=Object(Ne.a)(w,2),C=N[0],T=N[1],I=Object(n.useState)(!1),A=Object(Ne.a)(I,2),L=A[0],P=A[1];Object(n.useEffect)((function(){return"messenger"===We.key?(h(We.label),E(We.icon),S(We.maxChar),T(We.template)):"messenger"===Ve?(h(Ke),E(qe),S(Ye),T(Ge)):"messenger"===Ue&&(h(Ke),E(qe),S(Je),T(Fe)),function(){h(""),E(""),S(100),T("")}}),["messenger"]),Object(n.useEffect)((function(){var e=setTimeout((function(){L&&P(!1)}),3e3);return function(){return clearTimeout(e)}}),[L]);var M=Object(n.useCallback)(Object(k.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,D({message:a});case 6:return t=e.sent,e.next=9,R({messageId:t});case 9:n=e.sent,console.log("save data for history?",n),console.log("or trigger fetch messages"),m(!1),s(null),c(""),P(!0),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),s(e.t0),Ze(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])}))),[u,a]),D=Object(n.useCallback)(function(){var e=Object(k.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V({message:t.message});case 3:return a=e.sent,m(!1),s(null),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),s(e.t0),Ze(e.t0),m(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),H=Object(n.useCallback)((function(){m(!1),m(!1),s(null)}),[]),z={messageProviderLabel:g,messageProviderIcon:v,maxChar:j,template:C};return r.a.createElement(Se,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(ze,{className:"flex-grow p-4",messenger:z,onMessageChange:function(e){return c(e.target.value)},message:a,onSend:function(){return function(e,t){_.a.confirm({title:F.t("Are you sure you want to send"),onOk:function(){e()},onCancel:function(){t()},className:"border-2 border-blue-dark rounded-md p-0",okText:F.t("ok"),cancelText:F.t("cancel")})}(M,H)},onCancel:function(){return c("")},disabled:u,isSuccess:L}),r.a.createElement(Be,{className:"flex-grow p-4",type:"messenger",messages:a})))},exact:!0},{path:"/telegram-style-1",component:Xe,exact:!0},{component:g}],et=[{from:"/test",to:"/",exact:!0}],tt=(a(449),function(e){return e.redirectList.map((function(e){return r.a.createElement(d.a,{from:e.from.toString(),to:e.to.toString(),exact:e.exact,key:i()()})}))}),at=function(e){var t=e.path;return Object(s.c)((function(e){return e.auth.token}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{from:t,to:"/login"})},nt=function(e){var t=e.store,a=Object(u.b)().t;return r.a.createElement(p.a,null,r.a.createElement(m.Helmet,null,r.a.createElement("title",null,a("app_title"))),r.a.createElement(s.a,{store:t},r.a.createElement(d.d,null,$e.map((function(e,a){return e.private?r.a.createElement(at,Object.assign({key:a.toString()},e,{store:t})):r.a.createElement(d.b,Object.assign({key:a.toString()},e,{store:t}))})),r.a.createElement(tt,{redirectList:et}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=a(20),ct=a(227),ot=a(56),st=a(223),lt=a.n(st),it=a(224),ut=a(225),mt={loading:!1,message:"",error:null};var dt={loading:!1,token:"",phone:"",error:null};var pt=Object(ot.c)({message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(rt.a)({},e,{loading:!0});case"ON_MESSAGE_CHANGE":return Object(rt.a)({},e,{message:t.payload});case"ON_MESSAGE_RESET":return Object(rt.a)({},e,{message:""});case"SEND_MESSAGE_SUCCESS":return Object(rt.a)({},e,{loading:!1,error:null,message:""});case"SEND_MESSAGE_FAIL":return Object(rt.a)({},e,{loading:!1,error:t.payload.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_AUTH_TOKEN":return Object(rt.a)({},e,{token:t.payload});case"SAVE_PHONE":return Object(rt.a)({},e,{phone:t.payload});case"VALIDATE_TOKEN_START":return Object(rt.a)({},e,{loading:!0,error:null});case"VALIDATE_TOKEN_SUCCESS":return Object(rt.a)({},e,{loading:!1,error:null});case"VALIDATE_TOKEN_FAIL":return Object(rt.a)({},e,{token:"",loading:!1,error:t.payload.error});default:return e}}}),gt=function(){var e;Object(it.createLogger)({});e=[ut.a];var t=ot.d.apply(void 0,[ot.a.apply(void 0,Object(ct.a)(e))].concat([])),a=Object(rt.a)({},function(){try{var e=localStorage.getItem("state");if(null===e)return;return Object(rt.a)({},JSON.parse(e))}catch(t){return}}()),n=Object(ot.e)(pt,a,t);return n.subscribe(lt()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}({auth:n.getState().auth})}),3e3)),n};a(457),a(459);L.initializeApp({apiKey:"AIzaSyDVT7hjCcB-mi3a-q4A7XZvbkGgc8z4Q5w",databaseURL:"https://hackh-broadcast.firebaseio.com",storageBucket:"hackh-broadcast.appspot.com"}),L.auth().setPersistence(L.auth.Auth.Persistence.LOCAL);var ht=gt();o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(nt,{store:ht})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);
//# sourceMappingURL=main.914dcafa.chunk.js.map